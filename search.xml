<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>随笔</title>
    <url>/archives/f77810a8.html</url>
    <content><![CDATA[<p>平时学习中，遇到的一些盲区知识点的记录</p>
<a id="more"></a>

<h2 id="github精准查找开源项目"><a href="#github精准查找开源项目" class="headerlink" title="github精准查找开源项目"></a>github精准查找开源项目</h2><p>in:name example 名字中有“example”</p>
<p>in:readme example readme中有“example”</p>
<p>in:description example 描述中有“example”</p>
<p>stars:&gt;1000 star&gt;1000</p>
<p>forks:&gt;1000 fork&gt;1000</p>
<p>pushed:&gt;2019-09-01 2019年9月1日后有更新的</p>
<p>language:java 用Java编写的项目 </p>
<hr>
<h2 id="Linux（CentOS）安装Node-JS和npm的两种方式"><a href="#Linux（CentOS）安装Node-JS和npm的两种方式" class="headerlink" title="Linux（CentOS）安装Node.JS和npm的两种方式"></a>Linux（CentOS）安装Node.JS和npm的两种方式</h2><h4 id="yum安装"><a href="#yum安装" class="headerlink" title="yum安装"></a>yum安装</h4><p>yum安装是将yum源中的rpm包下载到本地，安装这个rpm包。这个rpm包是别人编译安装好的二进制包。这种方式方便快捷，特别是不用考虑包依赖</p>
<ol>
<li>了解linux版本<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">通过  uname -a  命令查看到我的Linux系统位数是64位（备注：x86_64表示64位系统， i686 i386表示32位系统）</span><br></pre></td></tr></table></figure></li>
<li>添加 epel 源</li>
</ol>
<p>64位:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -ivh http:&#x2F;&#x2F;download.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;6&#x2F;x86_64&#x2F;epel-release-6-8.noarch.rpm</span><br></pre></td></tr></table></figure>
<p>32位:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -ivh http:&#x2F;&#x2F;download.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;6&#x2F;i386&#x2F;epel-release-6-8.noarch.rpm</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>导入key<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pm --import &#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-EPEL-6</span><br></pre></td></tr></table></figure></li>
<li>添加 remi 源<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -ivh http:&#x2F;&#x2F;rpms.famillecollet.com&#x2F;enterprise&#x2F;remi-release-6.rpm</span><br><span class="line">rpm --import &#x2F;etc&#x2F;pki&#x2F;rpm-gpg&#x2F;RPM-GPG-KEY-remi</span><br></pre></td></tr></table></figure></li>
<li>安装完成后，执行<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl --silent --location https:&#x2F;&#x2F;rpm.nodesource.com&#x2F;setup_5.x | bash -</span><br><span class="line">yum -y install nodejs</span><br></pre></td></tr></table></figure></li>
<li>检查Node.js和npm版本<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>
<h4 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h4>源码安装，下载是源码包，要进行编译和安装，编译过程，可以进行参数设定。这种方式灵活性比较大，版本/参数可以自己选择。</li>
<li>创建目录<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;opt</span><br><span class="line">mkdir node.js</span><br><span class="line">cd node.js</span><br></pre></td></tr></table></figure></li>
<li>去官网下载安装包或者用wget下载<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;nodejs.org&#x2F;dist&#x2F;v9.8.0&#x2F;node-v9.8.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure></li>
<li>解压安装包<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xz -d node-v9.8.0-linux-x64.tar.xz</span><br><span class="line">tar -xvf node-v9.8.0-linux-x64.tar</span><br></pre></td></tr></table></figure></li>
<li>进入目录<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd node-v9.8.0-linux-x64</span><br></pre></td></tr></table></figure></li>
<li>软链接<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ln -s &#x2F;opt&#x2F;nodejs&#x2F;node-v9.8.0-linux-x64&#x2F;bin&#x2F;node &#x2F;usr&#x2F;local&#x2F;bin&#x2F;node</span><br><span class="line">ln -s &#x2F;opt&#x2F;nodejs&#x2F;node-v9.8.0-linux-x64&#x2F;bin&#x2F;npm &#x2F;usr&#x2F;local&#x2F;bin&#x2F;npm</span><br></pre></td></tr></table></figure></li>
<li>测试Node.js和npm版本<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure></li>
<li>配置淘宝npm镜像<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">由于官方镜像比较慢，直接执行以下命令，将镜像地址改为淘宝的npm镜像地址</span><br><span class="line">npm config set registry https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure>



</li>
</ol>
]]></content>
      <tags>
        <tag>HTML</tag>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>linux环境搭建hadoop集群</title>
    <url>/archives/546334a.html</url>
    <content><![CDATA[<p>mac系统使用centOS7虚拟机搭建hadoop集群</p>
<a id="more"></a>
<h1 id="1-配置防火墙"><a href="#1-配置防火墙" class="headerlink" title="1.配置防火墙"></a>1.配置防火墙</h1><h2 id="1-1-关闭防火墙"><a href="#1-1-关闭防火墙" class="headerlink" title="1.1 关闭防火墙"></a>1.1 关闭防火墙</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">查看防火墙状态</span><br><span class="line">systemctl status firewalld</span><br><span class="line">禁用防火墙</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">禁止防火墙随着系统的启动而启动</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<h2 id="1-2-禁用selinux"><a href="#1-2-禁用selinux" class="headerlink" title="1.2 禁用selinux"></a>1.2 禁用selinux</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">将selinux的值设置为disabled</span><br><span class="line">vi &#x2F;etc&#x2F;selinux&#x2F;config</span><br><span class="line">查看是否设置完成</span><br><span class="line">cat &#x2F;etc&#x2F;selinux&#x2F;config</span><br></pre></td></tr></table></figure>

<h1 id="2-上传JDK"><a href="#2-上传JDK" class="headerlink" title="2.上传JDK"></a>2.上传JDK</h1><h2 id="2-1-将rpm格式的jdk拖到root下"><a href="#2-1-将rpm格式的jdk拖到root下" class="headerlink" title="2.1 将rpm格式的jdk拖到root下"></a>2.1 将rpm格式的jdk拖到root下</h2><h2 id="2-2-安装jdk"><a href="#2-2-安装jdk" class="headerlink" title="2.2 安装jdk"></a>2.2 安装jdk</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -ivh jdk.rpm</span><br><span class="line">&#x2F;&#x2F;ivh查看进度</span><br></pre></td></tr></table></figure>
<h2 id="2-3-查找java安装在哪儿了"><a href="#2-3-查找java安装在哪儿了" class="headerlink" title="2.3 查找java安装在哪儿了"></a>2.3 查找java安装在哪儿了</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find &#x2F; -name java</span><br><span class="line">&#x2F;&#x2F; &#x2F;表示在根目录下查找</span><br></pre></td></tr></table></figure>
<h2 id="2-4-配置环境变量"><a href="#2-4-配置环境变量" class="headerlink" title="2.4 配置环境变量"></a>2.4 配置环境变量</h2><ol>
<li>先ll -a 查看所有包含隐藏文件</li>
<li>编辑.bash_profile<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;新增JAVA_HOME</span><br><span class="line">JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_211-amd64</span><br><span class="line">&#x2F;&#x2F;在PATH后添加路径</span><br><span class="line">PATH&#x3D;$PATH:$HOME&#x2F;bin:$JAVA_HOME&#x2F;bin</span><br><span class="line">&#x2F;&#x2F;再输出下JAVA_HOME</span><br><span class="line">export JAVA_HOME</span><br><span class="line">&#x2F;&#x2F;保存退出</span><br><span class="line">:wq!</span><br></pre></td></tr></table></figure></li>
<li>在生效文件<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="3-配置时间同步"><a href="#3-配置时间同步" class="headerlink" title="3.配置时间同步"></a>3.配置时间同步</h1><h2 id="3-1-安装时间同步软件"><a href="#3-1-安装时间同步软件" class="headerlink" title="3.1 安装时间同步软件"></a>3.1 安装时间同步软件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install ntpdate</span><br></pre></td></tr></table></figure>
<h2 id="3-2-配置定时时间同步"><a href="#3-2-配置定时时间同步" class="headerlink" title="3.2 配置定时时间同步"></a>3.2 配置定时时间同步</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;使用crontab -e命令添加定时时间同步配置</span><br><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
<h2 id="3-3-添加配置"><a href="#3-3-添加配置" class="headerlink" title="3.3 添加配置"></a>3.3 添加配置</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*&#x2F;1 * * * * &#x2F;usr&#x2F;sbin&#x2F;ntpdate us.pool.ntp.org;</span><br></pre></td></tr></table></figure>
<h2 id="3-4-安装网络工具net-tools"><a href="#3-4-安装网络工具net-tools" class="headerlink" title="3.4 安装网络工具net-tools"></a>3.4 安装网络工具net-tools</h2><ol>
<li>有时候ifconfig无效，是因为没有安装这个工具</li>
</ol>
<h1 id="4-root用户的免密登录配置"><a href="#4-root用户的免密登录配置" class="headerlink" title="4.root用户的免密登录配置"></a>4.root用户的免密登录配置</h1><h2 id="4-1-分别在三个节点主机上修改配置host文件"><a href="#4-1-分别在三个节点主机上修改配置host文件" class="headerlink" title="4.1 分别在三个节点主机上修改配置host文件"></a>4.1 分别在三个节点主机上修改配置host文件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;hosts</span><br><span class="line">&#x2F;&#x2F;添加</span><br><span class="line">172.16.161.130 node1</span><br><span class="line">172.16.161.131 node2</span><br><span class="line">172.16.161.132 node3</span><br></pre></td></tr></table></figure>
<h2 id="4-2-在三个节点分别生成密钥"><a href="#4-2-在三个节点分别生成密钥" class="headerlink" title="4.2 在三个节点分别生成密钥"></a>4.2 在三个节点分别生成密钥</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<h2 id="4-3-拷贝公钥文件到每台节点上"><a href="#4-3-拷贝公钥文件到每台节点上" class="headerlink" title="4.3 拷贝公钥文件到每台节点上"></a>4.3 拷贝公钥文件到每台节点上</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;以node1为例,将node1的公钥拷贝到node2，node3上</span><br><span class="line">ssh-copy-id -i node2</span><br><span class="line">ssh-copy-id -i node3</span><br></pre></td></tr></table></figure>
<h2 id="4-4-验证免密登录配置"><a href="#4-4-验证免密登录配置" class="headerlink" title="4.4 验证免密登录配置"></a>4.4 验证免密登录配置</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;以在node1上演示为例</span><br><span class="line">ssh node2</span><br><span class="line">&#x2F;&#x2F;此时已登录到node2</span><br><span class="line">logout</span><br><span class="line">&#x2F;&#x2F;此时已返回node1</span><br></pre></td></tr></table></figure>
<h2 id="4-5-添加本地认证公钥到认证文件中"><a href="#4-5-添加本地认证公钥到认证文件中" class="headerlink" title="4.5 添加本地认证公钥到认证文件中"></a>4.5 添加本地认证公钥到认证文件中</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd ~</span><br><span class="line">cd .ssh&#x2F;</span><br><span class="line">&#x2F;&#x2F;将生成的公钥添加到认证文件中</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>
<h1 id="5-安装hadoop"><a href="#5-安装hadoop" class="headerlink" title="5.安装hadoop"></a>5.安装hadoop</h1><h2 id="5-1-创建hadoop用户组和hadoop用户"><a href="#5-1-创建hadoop用户组和hadoop用户" class="headerlink" title="5.1 创建hadoop用户组和hadoop用户"></a>5.1 创建hadoop用户组和hadoop用户</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;添加用户组hadoop</span><br><span class="line">groupadd hadoop</span><br><span class="line">&#x2F;&#x2F;创建用户hadoop并添加到hadoop用户组中</span><br><span class="line">useradd -g hadoop hadoop</span><br><span class="line">&#x2F;&#x2F;使用id命令查看hadoop用户组和hadoop用户创建是否成功</span><br><span class="line">id hadoop</span><br><span class="line">&#x2F;&#x2F;设置hadoop用户密码为hadoop</span><br><span class="line">passwd hadoop</span><br><span class="line">&#x2F;&#x2F;修改权限</span><br><span class="line">chown -R hadoop:hadoop &#x2F;home&#x2F;hadoop&#x2F;</span><br><span class="line">chmod -R 755 &#x2F;home&#x2F;hadoop&#x2F;</span><br><span class="line">&#x2F;&#x2F;把root用户环境变量配置文件复制并覆盖hadoop用户下</span><br><span class="line">cp .bash_profile &#x2F;home&#x2F;hadoop&#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="5-2-对hadoop用户做免密登录配置参考root用户的方式"><a href="#5-2-对hadoop用户做免密登录配置参考root用户的方式" class="headerlink" title="5.2 对hadoop用户做免密登录配置参考root用户的方式"></a>5.2 对hadoop用户做免密登录配置参考root用户的方式</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;切换用户</span><br><span class="line">su - hadoop</span><br><span class="line">&#x2F;&#x2F;使配置文件生效</span><br><span class="line">source .bash_profile</span><br><span class="line">&#x2F;&#x2F;生成秘钥</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">&#x2F;&#x2F;生成秘钥后修改权限</span><br><span class="line">chmod -R 755 .ssh&#x2F;</span><br><span class="line">cd .ssh&#x2F;</span><br><span class="line">chmod 644 *</span><br><span class="line">chmod 600 id_rsa</span><br><span class="line">chmod 600 id_rsa.pub</span><br></pre></td></tr></table></figure>
<h2 id="5-3-上传hadoop安装包，进行解压"><a href="#5-3-上传hadoop安装包，进行解压" class="headerlink" title="5.3 上传hadoop安装包，进行解压"></a>5.3 上传hadoop安装包，进行解压</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;在root下</span><br><span class="line">&#x2F;&#x2F;创建hadoop安装目录</span><br><span class="line">mkdir -p &#x2F;opt&#x2F;bigdata</span><br><span class="line">&#x2F;&#x2F;解压hadoop-3.1.2.tar.gz</span><br><span class="line">tar -xzvf hadoop-3.1.2.tar.gz -C &#x2F;opt&#x2F;bigdata&#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-配置hadoop环境变量"><a href="#5-4-配置hadoop环境变量" class="headerlink" title="5.4 配置hadoop环境变量"></a>5.4 配置hadoop环境变量</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;在root下</span><br><span class="line">&#x2F;&#x2F;在.bash_profile里添加环境变量</span><br><span class="line">HADOOP_HOME&#x3D;&#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2</span><br><span class="line">PATH&#x3D;$PATH:$HOME&#x2F;bin:$JAVA_HOME&#x2F;bin:$HADOOP_HOME&#x2F;bin:$HADOOP_HOME&#x2F;sbin</span><br><span class="line">export HADOOP_HOME</span><br></pre></td></tr></table></figure>
<h2 id="5-5-验证环境变量"><a href="#5-5-验证环境变量" class="headerlink" title="5.5 验证环境变量"></a>5.5 验证环境变量</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;使文件生效</span><br><span class="line">source .bash_profile</span><br><span class="line">&#x2F;&#x2F;查看版本</span><br><span class="line">hadoop version</span><br></pre></td></tr></table></figure>
<p>==hadoop用户下也要重复操作一遍==</p>
<h2 id="5-6-配置hadoop-env-sh"><a href="#5-6-配置hadoop-env-sh" class="headerlink" title="5.6 配置hadoop-env.sh"></a>5.6 配置hadoop-env.sh</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2&#x2F;etc&#x2F;hadoop&#x2F;</span><br><span class="line">vi hadoop-env.sh</span><br><span class="line">&#x2F;&#x2F;通过  &#x2F;export 快速查找到该单词</span><br><span class="line">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_211-amd64</span><br></pre></td></tr></table></figure>

<h2 id="5-7-配置core-site-xml"><a href="#5-7-配置core-site-xml" class="headerlink" title="5.7 配置core-site.xml"></a>5.7 配置core-site.xml</h2><p>先切换到 cd /opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定hdfs的namenode主机的hostname --&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://node1:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- io操作流的配置 --&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>io.file.buffer.size<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>131072<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--hadoop集群临时数据存储目录--&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/bigdata/hadoop-3.1.2/tmpdata<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-8-配置hdfs-site-xml"><a href="#5-8-配置hdfs-site-xml" class="headerlink" title="5.8 配置hdfs-site.xml"></a>5.8 配置hdfs-site.xml</h2><p>配置/opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的hdfs-site.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namenode元数据存储目录--&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/bigdata/hadoop-3.1.2/hadoop/hdfs/name/<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定block块的的大小--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.blocksize<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>268435456<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.handler.count<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--工作节点的数据块存储目录 --&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/bigdata/hadoop-3.1.2/hadoop/hdfs/data/<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--block的副本数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-9-配置mapred-site-xml"><a href="#5-9-配置mapred-site-xml" class="headerlink" title="5.9 配置mapred-site.xml"></a>5.9 配置mapred-site.xml</h2><p>配置/opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的mapred-site.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--指定运行mapreduce的环境是yarn --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span> <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.application.classpath<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*, $HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-10-配置yarn-site-xml"><a href="#5-10-配置yarn-site-xml" class="headerlink" title="5.10 配置yarn-site.xml"></a>5.10 配置yarn-site.xml</h2><p>配置/opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的yarn-site.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定resourcemanager的位置--&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18040<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.scheduler.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18030<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.resource-tracker.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18025<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.admin.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18141<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18088<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-11-编辑works"><a href="#5-11-编辑works" class="headerlink" title="5.11 编辑works"></a>5.11 编辑works</h2><p>编辑 /opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的works</p>
<p>此文件用于配置集群有多少个数据节点,我们把node2，node3作为数据节点,node1作为集群管理节点</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;将localhost这一行删除掉</span><br><span class="line">vi works</span><br><span class="line">node2</span><br><span class="line">node3</span><br></pre></td></tr></table></figure>

<h2 id="5-12-远程复制hadoop到集群机器"><a href="#5-12-远程复制hadoop到集群机器" class="headerlink" title="5.12 远程复制hadoop到集群机器"></a>5.12 远程复制hadoop到集群机器</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;root用户</span><br><span class="line">&#x2F;&#x2F;进到根目录下</span><br><span class="line">cd ~</span><br><span class="line">&#x2F;&#x2F;使用scp远程拷贝命令将root用户的环境变量配置文件复制到node2和node3</span><br><span class="line">scp .bash_profile root@node2:~</span><br><span class="line">scp .bash_profile root@node3:~</span><br><span class="line">&#x2F;&#x2F;进入到hadoop的share目录下</span><br><span class="line">cd &#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2&#x2F;share&#x2F;</span><br><span class="line">&#x2F;&#x2F;删除doc目录,这个目录存放的是用户手册，比较大，等会儿下面进行远程复制的时候时间比较长，删除后节约复制时间</span><br><span class="line">rm -rf doc&#x2F;</span><br><span class="line">cd ~</span><br><span class="line">scp -r &#x2F;opt root@node2:&#x2F;</span><br><span class="line">scp -r &#x2F;opt root@node3:&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="5-13-使集群所有机器环境变量生效"><a href="#5-13-使集群所有机器环境变量生效" class="headerlink" title="5.13 使集群所有机器环境变量生效"></a>5.13 使集群所有机器环境变量生效</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;在node2，node3的root用户家目录下使环境变量生效</span><br><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure>

<h2 id="5-14-修改hadoop安装目录的权限"><a href="#5-14-修改hadoop安装目录的权限" class="headerlink" title="5.14 修改hadoop安装目录的权限"></a>5.14 修改hadoop安装目录的权限</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;root下修改目录所属用户和组为hadoop:hadoop</span><br><span class="line">chown -R hadoop:hadoop &#x2F;opt&#x2F;</span><br><span class="line">&#x2F;&#x2F;修改目录所属用户和组的权限值为755</span><br><span class="line">chmod -R 755 &#x2F;opt&#x2F;</span><br><span class="line">chmod -R g+w &#x2F;opt&#x2F;</span><br><span class="line">chmod -R o+w &#x2F;opt&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="5-15-格式化hadoop"><a href="#5-15-格式化hadoop" class="headerlink" title="5.15 格式化hadoop"></a>5.15 格式化hadoop</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;root下切换hadoop</span><br><span class="line">su - hadoop</span><br><span class="line">&#x2F;&#x2F;格式化</span><br><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure>

<h2 id="5-16-启动集群"><a href="#5-16-启动集群" class="headerlink" title="5.16 启动集群"></a>5.16 启动集群</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">start-all.sh</span><br></pre></td></tr></table></figure>

<h2 id="5-17-打开网页"><a href="#5-17-打开网页" class="headerlink" title="5.17 打开网页"></a>5.17 打开网页</h2><p>host:9870</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;如果打不开，可以尝试将各个机器的防火墙关掉</span><br><span class="line">[root@node1 ~]# systemctl stop firewalld</span><br><span class="line">[root@node1 ~]# systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<h2 id="5-18-命令：查看端口号是否存在"><a href="#5-18-命令：查看端口号是否存在" class="headerlink" title="5.18 命令：查看端口号是否存在"></a>5.18 命令：查看端口号是否存在</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">netstat ano|grep 8032</span><br></pre></td></tr></table></figure>

<h2 id="5-20-运行MapReduce程序"><a href="#5-20-运行MapReduce程序" class="headerlink" title="5.20 运行MapReduce程序"></a>5.20 运行MapReduce程序</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;在hadoop用户下</span><br><span class="line">&#x2F;&#x2F;1.使用hadoop命令浏览hdfs文件系统</span><br><span class="line">hdfs dfs -ls &#x2F;</span><br><span class="line">&#x2F;&#x2F;2.创建测试目录</span><br><span class="line">hdfs dfs -mkdir &#x2F;test</span><br><span class="line">&#x2F;&#x2F;3.使用linux命令创建words文件</span><br><span class="line">touch words</span><br><span class="line">&#x2F;&#x2F;4.在文件中输入文字</span><br><span class="line">vi words</span><br><span class="line">&#x2F;&#x2F;5.将本地的words文件上传到hdfs的test目录下</span><br><span class="line">hdfs dfs -put words &#x2F;test</span><br><span class="line">&#x2F;&#x2F;6.&#x2F;test&#x2F;words 是hdfs上的文件存储路径 &#x2F;test&#x2F;output是mapreduce程序的输出路径，这个输出路径是不能已经存在的路径，mapreduce程序 运行的过程中会自动创建输出路径，数据路径存在的话会报错</span><br><span class="line">hadoop jar &#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;hadoop-mapreduce-examples- 3.1.2.jar wordcount &#x2F;test&#x2F;words &#x2F;test&#x2F;output</span><br><span class="line">&#x2F;&#x2F;6.查看output文件夹下内容</span><br><span class="line">hdfs dfs -ls -r &#x2F;test&#x2F;output</span><br><span class="line">&#x2F;&#x2F;7.查看输出文件内容</span><br><span class="line">hdfs dfs -text &#x2F;test&#x2F;output&#x2F;part-r-00000</span><br></pre></td></tr></table></figure>





]]></content>
      <tags>
        <tag>hadoop</tag>
        <tag>linux</tag>
      </tags>
  </entry>
</search>
