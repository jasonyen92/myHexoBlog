<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>殷小强的博客</title>
  
  <subtitle>生命不息，学习不止</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="117.50.95.243/"/>
  <updated>2020-02-04T12:28:43.484Z</updated>
  <id>117.50.95.243/</id>
  
  <author>
    <name>殷小强</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo博客搭建笔记</title>
    <link href="117.50.95.243/archives/c8c150f1.html"/>
    <id>117.50.95.243/archives/c8c150f1.html</id>
    <published>2020-02-04T12:28:43.484Z</published>
    <updated>2020-02-04T12:28:43.484Z</updated>
    
    <content type="html"><![CDATA[<p>该文记录了搭建hexo博客时候的一些问题</p><p>&lt;–!more–&gt;</p><h2 id="新建categories页面"><a href="#新建categories页面" class="headerlink" title="新建categories页面"></a>新建categories页面</h2><ol><li><p>在hexo（这时blog目录，根据自己定义的来）使用指令新建categories包</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hexo</span> <span class="string">new</span> <span class="string">page</span> <span class="string">categories</span></span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>然后到/hexo/source目录下，会多一个categories的目录，目录里面有一个index.md的文件，编辑此文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020</span><span class="number">-02</span><span class="number">-03</span> <span class="number">00</span><span class="string">:00:00</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span>  </span><br><span class="line"><span class="attr">layout:</span> <span class="string">"categories"</span></span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>编辑主题下的配置文件<strong><code>themes/next/_config.yml</code></strong>，修改为如下</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span></span><br><span class="line">  <span class="comment">#about: /about/|| user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/|| calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml|| sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/|| heartbeat</span></span><br></pre></td></tr></table></figure></li></ol><p>把你需要的前面的#号去掉，<code>注意</code>，官方的/与||之间有空格，要删除，否则categories页面打不开。</p><h2 id="页面底部来访次数和人数不显示问题"><a href="#页面底部来访次数和人数不显示问题" class="headerlink" title="## 页面底部来访次数和人数不显示问题"></a>## 页面底部来访次数和人数不显示问题</h2><p>由于不蒜子的url更新了，所以js文件引用失效，所以只需要更改下js文件里的引用就行。进入/hexo/themes/next/layout/_third-partyanalytics下，有的可能在这个目录下，有的可能在目录下的其他文件夹下，找到<code>busuanzi-counter.swig</code>文件，将</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>替换成</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"&gt;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>即可！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;该文记录了搭建hexo博客时候的一些问题&lt;/p&gt;
&lt;p&gt;&amp;lt;–!more–&amp;gt;&lt;/p&gt;
&lt;h2 id=&quot;新建categories页面&quot;&gt;&lt;a href=&quot;#新建categories页面&quot; class=&quot;headerlink&quot; title=&quot;新建categories页
      
    
    </summary>
    
    
      <category term="笔记" scheme="117.50.95.243/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="linux" scheme="117.50.95.243/categories/%E7%AC%94%E8%AE%B0/linux/"/>
    
    
      <category term="博客" scheme="117.50.95.243/tags/%E5%8D%9A%E5%AE%A2/"/>
    
      <category term="linux" scheme="117.50.95.243/tags/linux/"/>
    
      <category term="hexo" scheme="117.50.95.243/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>linux环境搭建hadoop集群</title>
    <link href="117.50.95.243/archives/546334a.html"/>
    <id>117.50.95.243/archives/546334a.html</id>
    <published>2020-02-03T14:22:15.292Z</published>
    <updated>2020-02-03T14:22:15.290Z</updated>
    
    <content type="html"><![CDATA[<p>mac系统使用centOS7虚拟机搭建hadoop集群</p><a id="more"></a><h1 id="1-配置防火墙"><a href="#1-配置防火墙" class="headerlink" title="1.配置防火墙"></a>1.配置防火墙</h1><h2 id="1-1-关闭防火墙"><a href="#1-1-关闭防火墙" class="headerlink" title="1.1 关闭防火墙"></a>1.1 关闭防火墙</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">查看防火墙状态</span><br><span class="line">systemctl status firewalld</span><br><span class="line">禁用防火墙</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">禁止防火墙随着系统的启动而启动</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><h2 id="1-2-禁用selinux"><a href="#1-2-禁用selinux" class="headerlink" title="1.2 禁用selinux"></a>1.2 禁用selinux</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将selinux的值设置为disabled</span><br><span class="line">vi &#x2F;etc&#x2F;selinux&#x2F;config</span><br><span class="line">查看是否设置完成</span><br><span class="line">cat &#x2F;etc&#x2F;selinux&#x2F;config</span><br></pre></td></tr></table></figure><h1 id="2-上传JDK"><a href="#2-上传JDK" class="headerlink" title="2.上传JDK"></a>2.上传JDK</h1><h2 id="2-1-将rpm格式的jdk拖到root下"><a href="#2-1-将rpm格式的jdk拖到root下" class="headerlink" title="2.1 将rpm格式的jdk拖到root下"></a>2.1 将rpm格式的jdk拖到root下</h2><h2 id="2-2-安装jdk"><a href="#2-2-安装jdk" class="headerlink" title="2.2 安装jdk"></a>2.2 安装jdk</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh jdk.rpm</span><br><span class="line">&#x2F;&#x2F;ivh查看进度</span><br></pre></td></tr></table></figure><h2 id="2-3-查找java安装在哪儿了"><a href="#2-3-查找java安装在哪儿了" class="headerlink" title="2.3 查找java安装在哪儿了"></a>2.3 查找java安装在哪儿了</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find &#x2F; -name java</span><br><span class="line">&#x2F;&#x2F; &#x2F;表示在根目录下查找</span><br></pre></td></tr></table></figure><h2 id="2-4-配置环境变量"><a href="#2-4-配置环境变量" class="headerlink" title="2.4 配置环境变量"></a>2.4 配置环境变量</h2><ol><li>先ll -a 查看所有包含隐藏文件</li><li>编辑.bash_profile<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;新增JAVA_HOME</span><br><span class="line">JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_211-amd64</span><br><span class="line">&#x2F;&#x2F;在PATH后添加路径</span><br><span class="line">PATH&#x3D;$PATH:$HOME&#x2F;bin:$JAVA_HOME&#x2F;bin</span><br><span class="line">&#x2F;&#x2F;再输出下JAVA_HOME</span><br><span class="line">export JAVA_HOME</span><br><span class="line">&#x2F;&#x2F;保存退出</span><br><span class="line">:wq!</span><br></pre></td></tr></table></figure></li><li>在生效文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure></li></ol><h1 id="3-配置时间同步"><a href="#3-配置时间同步" class="headerlink" title="3.配置时间同步"></a>3.配置时间同步</h1><h2 id="3-1-安装时间同步软件"><a href="#3-1-安装时间同步软件" class="headerlink" title="3.1 安装时间同步软件"></a>3.1 安装时间同步软件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ntpdate</span><br></pre></td></tr></table></figure><h2 id="3-2-配置定时时间同步"><a href="#3-2-配置定时时间同步" class="headerlink" title="3.2 配置定时时间同步"></a>3.2 配置定时时间同步</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;使用crontab -e命令添加定时时间同步配置</span><br><span class="line">crontab -e</span><br></pre></td></tr></table></figure><h2 id="3-3-添加配置"><a href="#3-3-添加配置" class="headerlink" title="3.3 添加配置"></a>3.3 添加配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&#x2F;1 * * * * &#x2F;usr&#x2F;sbin&#x2F;ntpdate us.pool.ntp.org;</span><br></pre></td></tr></table></figure><h2 id="3-4-安装网络工具net-tools"><a href="#3-4-安装网络工具net-tools" class="headerlink" title="3.4 安装网络工具net-tools"></a>3.4 安装网络工具net-tools</h2><ol><li>有时候ifconfig无效，是因为没有安装这个工具</li></ol><h1 id="4-root用户的免密登录配置"><a href="#4-root用户的免密登录配置" class="headerlink" title="4.root用户的免密登录配置"></a>4.root用户的免密登录配置</h1><h2 id="4-1-分别在三个节点主机上修改配置host文件"><a href="#4-1-分别在三个节点主机上修改配置host文件" class="headerlink" title="4.1 分别在三个节点主机上修改配置host文件"></a>4.1 分别在三个节点主机上修改配置host文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;hosts</span><br><span class="line">&#x2F;&#x2F;添加</span><br><span class="line">172.16.161.130 node1</span><br><span class="line">172.16.161.131 node2</span><br><span class="line">172.16.161.132 node3</span><br></pre></td></tr></table></figure><h2 id="4-2-在三个节点分别生成密钥"><a href="#4-2-在三个节点分别生成密钥" class="headerlink" title="4.2 在三个节点分别生成密钥"></a>4.2 在三个节点分别生成密钥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><h2 id="4-3-拷贝公钥文件到每台节点上"><a href="#4-3-拷贝公钥文件到每台节点上" class="headerlink" title="4.3 拷贝公钥文件到每台节点上"></a>4.3 拷贝公钥文件到每台节点上</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;以node1为例,将node1的公钥拷贝到node2，node3上</span><br><span class="line">ssh-copy-id -i node2</span><br><span class="line">ssh-copy-id -i node3</span><br></pre></td></tr></table></figure><h2 id="4-4-验证免密登录配置"><a href="#4-4-验证免密登录配置" class="headerlink" title="4.4 验证免密登录配置"></a>4.4 验证免密登录配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;以在node1上演示为例</span><br><span class="line">ssh node2</span><br><span class="line">&#x2F;&#x2F;此时已登录到node2</span><br><span class="line">logout</span><br><span class="line">&#x2F;&#x2F;此时已返回node1</span><br></pre></td></tr></table></figure><h2 id="4-5-添加本地认证公钥到认证文件中"><a href="#4-5-添加本地认证公钥到认证文件中" class="headerlink" title="4.5 添加本地认证公钥到认证文件中"></a>4.5 添加本地认证公钥到认证文件中</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">cd .ssh&#x2F;</span><br><span class="line">&#x2F;&#x2F;将生成的公钥添加到认证文件中</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure><h1 id="5-安装hadoop"><a href="#5-安装hadoop" class="headerlink" title="5.安装hadoop"></a>5.安装hadoop</h1><h2 id="5-1-创建hadoop用户组和hadoop用户"><a href="#5-1-创建hadoop用户组和hadoop用户" class="headerlink" title="5.1 创建hadoop用户组和hadoop用户"></a>5.1 创建hadoop用户组和hadoop用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;添加用户组hadoop</span><br><span class="line">groupadd hadoop</span><br><span class="line">&#x2F;&#x2F;创建用户hadoop并添加到hadoop用户组中</span><br><span class="line">useradd -g hadoop hadoop</span><br><span class="line">&#x2F;&#x2F;使用id命令查看hadoop用户组和hadoop用户创建是否成功</span><br><span class="line">id hadoop</span><br><span class="line">&#x2F;&#x2F;设置hadoop用户密码为hadoop</span><br><span class="line">passwd hadoop</span><br><span class="line">&#x2F;&#x2F;修改权限</span><br><span class="line">chown -R hadoop:hadoop &#x2F;home&#x2F;hadoop&#x2F;</span><br><span class="line">chmod -R 755 &#x2F;home&#x2F;hadoop&#x2F;</span><br><span class="line">&#x2F;&#x2F;把root用户环境变量配置文件复制并覆盖hadoop用户下</span><br><span class="line">cp .bash_profile &#x2F;home&#x2F;hadoop&#x2F;</span><br></pre></td></tr></table></figure><h2 id="5-2-对hadoop用户做免密登录配置参考root用户的方式"><a href="#5-2-对hadoop用户做免密登录配置参考root用户的方式" class="headerlink" title="5.2 对hadoop用户做免密登录配置参考root用户的方式"></a>5.2 对hadoop用户做免密登录配置参考root用户的方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;切换用户</span><br><span class="line">su - hadoop</span><br><span class="line">&#x2F;&#x2F;使配置文件生效</span><br><span class="line">source .bash_profile</span><br><span class="line">&#x2F;&#x2F;生成秘钥</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">&#x2F;&#x2F;生成秘钥后修改权限</span><br><span class="line">chmod -R 755 .ssh&#x2F;</span><br><span class="line">cd .ssh&#x2F;</span><br><span class="line">chmod 644 *</span><br><span class="line">chmod 600 id_rsa</span><br><span class="line">chmod 600 id_rsa.pub</span><br></pre></td></tr></table></figure><h2 id="5-3-上传hadoop安装包，进行解压"><a href="#5-3-上传hadoop安装包，进行解压" class="headerlink" title="5.3 上传hadoop安装包，进行解压"></a>5.3 上传hadoop安装包，进行解压</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;在root下</span><br><span class="line">&#x2F;&#x2F;创建hadoop安装目录</span><br><span class="line">mkdir -p &#x2F;opt&#x2F;bigdata</span><br><span class="line">&#x2F;&#x2F;解压hadoop-3.1.2.tar.gz</span><br><span class="line">tar -xzvf hadoop-3.1.2.tar.gz -C &#x2F;opt&#x2F;bigdata&#x2F;</span><br></pre></td></tr></table></figure><h2 id="5-4-配置hadoop环境变量"><a href="#5-4-配置hadoop环境变量" class="headerlink" title="5.4 配置hadoop环境变量"></a>5.4 配置hadoop环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;在root下</span><br><span class="line">&#x2F;&#x2F;在.bash_profile里添加环境变量</span><br><span class="line">HADOOP_HOME&#x3D;&#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2</span><br><span class="line">PATH&#x3D;$PATH:$HOME&#x2F;bin:$JAVA_HOME&#x2F;bin:$HADOOP_HOME&#x2F;bin:$HADOOP_HOME&#x2F;sbin</span><br><span class="line">export HADOOP_HOME</span><br></pre></td></tr></table></figure><h2 id="5-5-验证环境变量"><a href="#5-5-验证环境变量" class="headerlink" title="5.5 验证环境变量"></a>5.5 验证环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;使文件生效</span><br><span class="line">source .bash_profile</span><br><span class="line">&#x2F;&#x2F;查看版本</span><br><span class="line">hadoop version</span><br></pre></td></tr></table></figure><p>==hadoop用户下也要重复操作一遍==</p><h2 id="5-6-配置hadoop-env-sh"><a href="#5-6-配置hadoop-env-sh" class="headerlink" title="5.6 配置hadoop-env.sh"></a>5.6 配置hadoop-env.sh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2&#x2F;etc&#x2F;hadoop&#x2F;</span><br><span class="line">vi hadoop-env.sh</span><br><span class="line">&#x2F;&#x2F;通过  &#x2F;export 快速查找到该单词</span><br><span class="line">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_211-amd64</span><br></pre></td></tr></table></figure><h2 id="5-7-配置core-site-xml"><a href="#5-7-配置core-site-xml" class="headerlink" title="5.7 配置core-site.xml"></a>5.7 配置core-site.xml</h2><p>先切换到 cd /opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定hdfs的namenode主机的hostname --&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://node1:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- io操作流的配置 --&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>io.file.buffer.size<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>131072<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--hadoop集群临时数据存储目录--&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/bigdata/hadoop-3.1.2/tmpdata<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-8-配置hdfs-site-xml"><a href="#5-8-配置hdfs-site-xml" class="headerlink" title="5.8 配置hdfs-site.xml"></a>5.8 配置hdfs-site.xml</h2><p>配置/opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的hdfs-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namenode元数据存储目录--&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/bigdata/hadoop-3.1.2/hadoop/hdfs/name/<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定block块的的大小--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.blocksize<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>268435456<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.handler.count<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--工作节点的数据块存储目录 --&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/bigdata/hadoop-3.1.2/hadoop/hdfs/data/<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--block的副本数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-9-配置mapred-site-xml"><a href="#5-9-配置mapred-site-xml" class="headerlink" title="5.9 配置mapred-site.xml"></a>5.9 配置mapred-site.xml</h2><p>配置/opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的mapred-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--指定运行mapreduce的环境是yarn --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span> <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.application.classpath<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*, $HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-10-配置yarn-site-xml"><a href="#5-10-配置yarn-site-xml" class="headerlink" title="5.10 配置yarn-site.xml"></a>5.10 配置yarn-site.xml</h2><p>配置/opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的yarn-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定resourcemanager的位置--&gt;</span> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18040<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.scheduler.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18030<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.resource-tracker.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18025<span class="tag">&lt;/<span class="name">value</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.admin.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18141<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:18088<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-11-编辑works"><a href="#5-11-编辑works" class="headerlink" title="5.11 编辑works"></a>5.11 编辑works</h2><p>编辑 /opt/bigdata/hadoop-3.1.2/etc/hadoop/目录下的works</p><p>此文件用于配置集群有多少个数据节点,我们把node2，node3作为数据节点,node1作为集群管理节点</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;将localhost这一行删除掉</span><br><span class="line">vi works</span><br><span class="line">node2</span><br><span class="line">node3</span><br></pre></td></tr></table></figure><h2 id="5-12-远程复制hadoop到集群机器"><a href="#5-12-远程复制hadoop到集群机器" class="headerlink" title="5.12 远程复制hadoop到集群机器"></a>5.12 远程复制hadoop到集群机器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;root用户</span><br><span class="line">&#x2F;&#x2F;进到根目录下</span><br><span class="line">cd ~</span><br><span class="line">&#x2F;&#x2F;使用scp远程拷贝命令将root用户的环境变量配置文件复制到node2和node3</span><br><span class="line">scp .bash_profile root@node2:~</span><br><span class="line">scp .bash_profile root@node3:~</span><br><span class="line">&#x2F;&#x2F;进入到hadoop的share目录下</span><br><span class="line">cd &#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2&#x2F;share&#x2F;</span><br><span class="line">&#x2F;&#x2F;删除doc目录,这个目录存放的是用户手册，比较大，等会儿下面进行远程复制的时候时间比较长，删除后节约复制时间</span><br><span class="line">rm -rf doc&#x2F;</span><br><span class="line">cd ~</span><br><span class="line">scp -r &#x2F;opt root@node2:&#x2F;</span><br><span class="line">scp -r &#x2F;opt root@node3:&#x2F;</span><br></pre></td></tr></table></figure><h2 id="5-13-使集群所有机器环境变量生效"><a href="#5-13-使集群所有机器环境变量生效" class="headerlink" title="5.13 使集群所有机器环境变量生效"></a>5.13 使集群所有机器环境变量生效</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;在node2，node3的root用户家目录下使环境变量生效</span><br><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure><h2 id="5-14-修改hadoop安装目录的权限"><a href="#5-14-修改hadoop安装目录的权限" class="headerlink" title="5.14 修改hadoop安装目录的权限"></a>5.14 修改hadoop安装目录的权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;root下修改目录所属用户和组为hadoop:hadoop</span><br><span class="line">chown -R hadoop:hadoop &#x2F;opt&#x2F;</span><br><span class="line">&#x2F;&#x2F;修改目录所属用户和组的权限值为755</span><br><span class="line">chmod -R 755 &#x2F;opt&#x2F;</span><br><span class="line">chmod -R g+w &#x2F;opt&#x2F;</span><br><span class="line">chmod -R o+w &#x2F;opt&#x2F;</span><br></pre></td></tr></table></figure><h2 id="5-15-格式化hadoop"><a href="#5-15-格式化hadoop" class="headerlink" title="5.15 格式化hadoop"></a>5.15 格式化hadoop</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;root下切换hadoop</span><br><span class="line">su - hadoop</span><br><span class="line">&#x2F;&#x2F;格式化</span><br><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><h2 id="5-16-启动集群"><a href="#5-16-启动集群" class="headerlink" title="5.16 启动集群"></a>5.16 启动集群</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-all.sh</span><br></pre></td></tr></table></figure><h2 id="5-17-打开网页"><a href="#5-17-打开网页" class="headerlink" title="5.17 打开网页"></a>5.17 打开网页</h2><p>host:9870</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;如果打不开，可以尝试将各个机器的防火墙关掉</span><br><span class="line">[root@node1 ~]# systemctl stop firewalld</span><br><span class="line">[root@node1 ~]# systemctl disable firewalld</span><br></pre></td></tr></table></figure><h2 id="5-18-命令：查看端口号是否存在"><a href="#5-18-命令：查看端口号是否存在" class="headerlink" title="5.18 命令：查看端口号是否存在"></a>5.18 命令：查看端口号是否存在</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat ano|grep 8032</span><br></pre></td></tr></table></figure><h2 id="5-20-运行MapReduce程序"><a href="#5-20-运行MapReduce程序" class="headerlink" title="5.20 运行MapReduce程序"></a>5.20 运行MapReduce程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;在hadoop用户下</span><br><span class="line">&#x2F;&#x2F;1.使用hadoop命令浏览hdfs文件系统</span><br><span class="line">hdfs dfs -ls &#x2F;</span><br><span class="line">&#x2F;&#x2F;2.创建测试目录</span><br><span class="line">hdfs dfs -mkdir &#x2F;test</span><br><span class="line">&#x2F;&#x2F;3.使用linux命令创建words文件</span><br><span class="line">touch words</span><br><span class="line">&#x2F;&#x2F;4.在文件中输入文字</span><br><span class="line">vi words</span><br><span class="line">&#x2F;&#x2F;5.将本地的words文件上传到hdfs的test目录下</span><br><span class="line">hdfs dfs -put words &#x2F;test</span><br><span class="line">&#x2F;&#x2F;6.&#x2F;test&#x2F;words 是hdfs上的文件存储路径 &#x2F;test&#x2F;output是mapreduce程序的输出路径，这个输出路径是不能已经存在的路径，mapreduce程序 运行的过程中会自动创建输出路径，数据路径存在的话会报错</span><br><span class="line">hadoop jar &#x2F;opt&#x2F;bigdata&#x2F;hadoop-3.1.2&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;hadoop-mapreduce-examples- 3.1.2.jar wordcount &#x2F;test&#x2F;words &#x2F;test&#x2F;output</span><br><span class="line">&#x2F;&#x2F;6.查看output文件夹下内容</span><br><span class="line">hdfs dfs -ls -r &#x2F;test&#x2F;output</span><br><span class="line">&#x2F;&#x2F;7.查看输出文件内容</span><br><span class="line">hdfs dfs -text &#x2F;test&#x2F;output&#x2F;part-r-00000</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;mac系统使用centOS7虚拟机搭建hadoop集群&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="linux" scheme="117.50.95.243/tags/linux/"/>
    
      <category term="hadoop" scheme="117.50.95.243/tags/hadoop/"/>
    
  </entry>
  
</feed>
